<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>Shipping and Payment Details | Winston's Humidor</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap core CSS -->
    <link href="css/style.css" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet" />
    <link href="css/font-awesome.min.css" rel="stylesheet" />


</head>

<body style="background-color:white">


    <nav class="menu" id="theMenu">
        <div class="menu-wrap">
            <h1 class="logo"><img src="images/WinstonHumidor_Cigar_Brown(2).png" class="img-responsive center-block" style="max-width:100px" /></h1>
            <i class="icon-remove menu-close"></i>
            <a href="#HomeMaster" class="smoothScroll">Home</a>
            <a href="Cigars.html" class="smoothScroll">Cigars</a>
            <a href="Pipes.html" class="smoothScroll">Pipes</a>
            <a href="PipeTobacco.html" class="smoothScroll">Pipe Tobacco</a>
            <a href="Apparel.html" class="smoothScroll">Apparel</a>
            <a href="Accessories.html" class="smoothScroll">Accessories</a>
            <a href="Co.html" class="smoothScroll">Coffee</a>
            <a href="Cart.html" class="smoothScroll">Cart</a>
            <a href="#"><i class="icon-facebook"></i></a>
            <a href="#"><i class="icon-twitter"></i></a>
            <a href="#"><i class="icon-instagram"></i></a>

        </div>

        <!-- Menu button -->
        <div id="menuToggle"><i class="icon-reorder"></i></div>
    </nav>

    <div class="modal fade" id="loginmodal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" style="background-color:rgba(01,01,01,0.7)">
        <div class="modal-dialog" role="document">
            <div class="modal-content" style="padding:5%">
                <input id="txtLoginEmail" style="font-family:'chiser'" class="form-control" placeholder="Email" />
                <br />
                <input id="txtLoginPassword" type="password" style="font-family:'chiser'" class="form-control" placeholder="Password" />

                <div>

                    <div class="modal-footer">
                        
                        <br />
                        <br />
                        <button type="button" class="btn btn-news" data-dismiss="modal"><i class="glyphicon glyphicon-remove"></i> Close</button>
                        <button id="btnLogin" type="button" class="btn btn-news2">Login</button>
                        <br />
                        <label id="lblloginmessage" style="color:red"></label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <section id="HomeMaster"></section>
    <!-----------------------------HEADER VIEWS START----------------------------------->
    <!-- DESKTOP VIEW -->
    <div style="background:linear-gradient(rgba(01,01,01,1),rgba(160,82,45,0.5)),url(images/IMG_9927.jpg);background-size:cover;background-repeat:no-repeat;background-position:top;margin-bottom:0px">
        <div class="container text-center">
            <div class="col-lg-12 text-left" style="padding-top:100px;padding-bottom:25px">
                <h1 style="color:white;font-family:'chiser';font-size:50px"><b>Shipping and Payment</b></h1>
            </div>
        </div><!-- /container -->

    </div><!-- /headerwrap -->
    <!-----------------------------HEADER VIEWS END----------------------------------->

    <div class="col-lg-8 col-lg-offset-2" style="padding-left:10%;padding-right:10%;padding-top:4%;margin-bottom:5%">


        <div class="col-lg-12 text-left alert alert-info" style="margin-bottom:5%">

           <h4 style="font-family:'chiser'">For a faster checkout experience, <a style="font-size:large" data-toggle='modal' data-target='#loginmodal' class="text-info" href="#"><b>log into your account</b></a></h4>
           <span style="font-size:medium;font-family:'chiser';font-style:italic"><i class="glyphicon glyphicon-info-sign"></i> Don't have one? No worries! Simply check 'save my details' at the end of the form.</span>
        </div>


        <div class="col-lg-6 text-left" style="font-family:'chiser'">
            <h4 style="font-family:'chiser'"><b>Shipping Details</b> </h4>
            <input id="txtEmailAddress" class="form-control" placeholder="Email Address"/>
            <br />
            <input id="txtFirstName" class="form-control" placeholder="First Name" />
            <br />
            <input id="txtLastName" class="form-control" placeholder="Last Name" />
            <br />
            <input id="txtStreet" class="form-control" placeholder="Street Address" />
            <br />
            <input id="txtCity" class="form-control" placeholder="City" />
            <br />
            <input id="txtState" class="form-control" placeholder="State" />
            <br />
            <input id="txtZip" class="form-control" placeholder="Zip" />
        </div>
        <div class="col-lg-6 text-left" style="font-family:'chiser'">
            <h4 style=" font-family:'chiser'">
            <b>Payment Details</b> </h4>
            <input id="ccNbr" class="form-control" placeholder="Credit Card Number" />
            <br />
            <input id="ccExMonth" class="form-control" placeholder="2 Digit Expiration Month" />
            <br />
            <input id="ccExYear" class="form-control" placeholder="2 Digit Expiration Year" />
            <br />
            <input id="ccSecCode" class="form-control" placeholder="Card Security Code" />
            <br />
            <input id="cbSaveMyDetails" type="checkbox"/> Save My Details
            <br />
            <br />
            <input type="password" class="form-control" placeholder="Password"/>
        </div>
        <div class="col-lg-12 text-left" style="font-family:'chiser';margin-top:5%">
            <hr />
            <h4 style=" font-family:'chiser'">
                <b>Payment Summary</b>
            </h4>
            <h4 style="font-family:'chiser'">Sub Total:$<span id="txtsubtotal"></span></h4>
            <h4 style="font-family:'chiser'">Discount: -$<span id="txtdiscount"></span></h4>
            <h4 style="font-family:'chiser'">Shipping:$25.00</h4>
            <h4 style="font-family:'chiser'">Grand Total:$<span id="txtgrandtotal"></span></h4>
            <br />
            <a href="#" id="btnSubmitOrder" class="btn btn-primary">Submit Order</a>
            <br />
            <br />
            <label id="paymentmsg" style="color:red"></label>
        </div>
        



 

    </div>



    <!-- Placed at the end of the document so the pages load faster -->


    <script src="js/jquery.min.js" type="text/javascript"></script>
    <script src="js/bootstrap.min.js" type="text/javascript"></script>
    <script src="js/main.js" type="text/javascript"></script>
    <script src="js/smoothscroll.js" type="text/javascript"></script>
    <script src="js/url.js" type="text/javascript"></script>


    <script>

        $(document).ready(function () {


           




            var _IsLoggedIn = false;
            // page load details
            var sPageURL = window.location.href
            var subtotal = window.url('?subtotal', sPageURL);
            var discount = window.url('#discount', sPageURL);
            $("#txtsubtotal").text(subtotal);
            $("#txtdiscount").text(discount);
            var grandtotal = (parseFloat(subtotal) - parseFloat(discount)) + 25.00;
            $("#txtgrandtotal").text((grandtotal).toFixed(2));

            // end page load details

            var _User;
            var _Email;
            
           

            $("#btnLogin").click(function (e) {
                e.preventDefault();
                var Email = $("#txtLoginEmail").val();
                var Password = $("#txtLoginPassword").val();

                $.ajax({
                    type: "POST",
                    url: "Engine.asmx/LoginUser",
                    data: "{Email:'"+ Email +"',Password:'"+ Password +"'}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (data) {
                        var result = data.d;
                        _IsLoggedIn == true;
                        $.each(result, function (index, item) {

                            _User = item.UserID;
                            // set field value equal to members pertinent information
                            
 
                           

                        })

                    },
                    failure: function (msg) {
                        alert(msg);
                    },
                    error: function (err) {
                        alert(err);
                    }
                }) //end ajax


                
            })




            $("#btnSubmitOrder").click(function (e) {
                e.preventDefault();

               
                // if logged in is true then don't worry about validating payment info fields
                // but we will still need to check shipping info. 

                $("#paymentmsg").text(" ");

                var Email = $("#txtEmailAddress");
                var FirstName = $("#txtFirstName");
                var LastName = $("#txtLastName");
                var Street = ("#txtStreet");
                var City = $("#txtCity");
                var State = $("#txtState");
                var Zip = $("#txtZip");

                $(Email).css("border-color", "#ccc");
                $(FirstName).css("border-color", "#ccc");
                $(LastName).css("border-color", "#ccc");
                $(Street).css("border-color", "#ccc");
                $(City).css("border-color", "#ccc");
                $(State).css("border-color", "#ccc");
                $(Zip).css("border-color", "#ccc");

                if ($.trim($(Email).val()) == "") {
                    $("#paymentmsg").text("Please provide a valid email address.");
                    $(Email).css("border-color", "red");
                    return;
                }
                if ($.trim($(FirstName).val()) == "") {
                    $("#paymentmsg").text("Please provide a valid first name.");
                    $(FirstName).css("border-color", "red");
                    return;
                }
                if ($.trim($(LastName).val()) == "") {
                    $("#paymentmsg").text("Please provide a valid last name.");
                    $(LastName).css("border-color", "red");
                    return;
                }
                if ($.trim($(Street).val()) == "") {
                    $("#paymentmsg").text("Please provide a valid street address.");
                    $(Street).css("border-color", "red");
                    return;
                }
                if ($.trim($(City).val()) == "") {
                    $("#paymentmsg").text("Please provide a valid city.");
                    $(City).css("border-color", "red");
                    return;
                }
                if ($.trim($(State).val()) == "") {
                    $("#paymentmsg").text("Please provide a valid state.");
                    $(State).css("border-color", "red");
                    return;
                }
                if ($.trim($(Zip).val()) == "") {
                    $("#paymentmsg").text("Please provide a valid zipcode.");
                    $(Zip).css("border-color", "red");
                    return;
                }

                //if (_IsLoggedIn == true) {

                //} else {
                //    if ($("#cbSaveMyDetails").is(":checked")) {
                //        //create account before charging  card
                //    } else {
                //       // just charge card
                //    }
                //}

              //  CheckoutAsGuest(ByVal Email As String, ByVal FirstName As String, ByVal LastName As String, ByVal Street As String, ByVal City As String, ByVal State As String, ByVal Zipcode As String, ByVal CC As String, ByVal ccMonth As String, ByVal ccYear As String, ByVal ccSecurity As String, ByVal saveDetails As Boolean, ByVal SubTotal As String, ByVal Discount As String, ByVal Shipping As String, ByVal Tax As String, ByVal TotalToCharge As String)
                    
                var ccnum = $("#ccNbr").val();
                var exmonth = $("#ccExMonth").val();
                var exyear = $("#ccExYear").val();
                var seccode = $("#ccSecCode").val();
                alert("yo");

                $.ajax({
                    type: "POST",
                    url: "Engine.asmx/CheckoutAsGuest",
                    data: "{Email:'" + Email.val() + "',FirstName:'" + FirstName.val() + "',LastName:'" + LastName.val() + "',Street:'" + $(Street).val() + "',City:'" + City.val() + "',State:'" + State.val() + "',Zipcode:'" + Zip.val() + "',CC:'" + ccnum + "',ccMonth:'" + exmonth + "',ccYear:'" + exyear + "',ccSecurity:'" + seccode + "',saveDetails:'" + true + "',SubTotal:'" + 10.00 + "',Discount:'" + 2.00 + "',Shipping:'" + 5.00 + "',Tax:'" + 6.00 + "',TotalToCharge:'" + 55.00 + "'}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (data) {
                        var result = data.d;
                        _IsLoggedIn == true;
                        $.each(result, function (index, item) {

                            _User = item.UserID;
                            // set field value equal to members pertinent information
                           
                           

                        })

                    },
                    failure: function (msg) {
                        alert(msg);
                    },
                    error: function (err) {
                        alert(err);
                    }
                }) //end ajax
                  

            })

       

        })







    </script>


</body>
</html>