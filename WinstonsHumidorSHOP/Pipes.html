<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>Pipes | Winston's Humidor</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">


    <!-- Bootstrap core CSS -->
    <link href="css/style.css" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet" />
    <link href="css/font-awesome.min.css" rel="stylesheet" />


</head>

<body style="background-color:white">






    <nav class="menu" id="theMenu">
        <div class="menu-wrap">
            <h1 class="logo"><img src="images/WinstonHumidor_Cigar_Brown(2).png" class="img-responsive center-block" style="max-width:100px" /></h1>
            <i class="icon-remove menu-close"></i>
            <a href="#HomeMaster" class="smoothScroll">Home</a>
            <a href="Cigars.html" class="smoothScroll">Cigars</a>
            <a href="Pipes.html" class="smoothScroll">Pipes</a>
            <a href="PipeTobacco.html" class="smoothScroll">Pipe Tobacco</a>
            <a href="Apparel.html" class="smoothScroll">Apparel</a>
            <a href="Accessories.html" class="smoothScroll">Accessories</a>
            <a id="myCart" data-toggle='modal' data-target='#viewCartModal' href="#" class="smoothScroll">Cart (<span id="cartcount"></span>)</a>
            <a href="#"><i class="icon-facebook"></i></a>
            <a href="#"><i class="icon-twitter"></i></a>
            <a href="#"><i class="icon-instagram"></i></a>

        </div>

        <!-- Menu button -->
        <div id="menuToggle"><i class="icon-reorder"></i></div>
    </nav>


    <section id="featuredproductsect"></section>
    <div class="col-lg-6" style="padding:0px">
        <div class="col-lg-12 text-center" style="background-color:white;padding:3%">
            <label style="font-family:'chiser';font-size:50px">PIPES</label>
        </div>

        <div id="FeaturedProductsLoader">

        </div>
    </div>

    <div class="col-lg-6 text-center" style="padding:0px">

        <div class="col-lg-12" style="padding:19.20%;background:linear-gradient(rgba(01,01,01,1),rgba(255,255,255,0.2)),url(images/pipes.png);background-size:cover;background-repeat:no-repeat;background-position-x:10%;">
            <h1 id="nofocus" style="color:white;font-family:'fancy';font-size:40px;">STAY IN THE LOOP</h1>
            <h3 style="color:white;font-family:'chiser'">Get notified when we add new pipes</h3>
            <input id="MailChimpEmail" placeholder="email address" class="form-control" style="font-size:30px;height:50px;font-family:'Chiser';background-color:rgba(01,01,01,0.1);border:1px solid white;border-top:none;border-left:none;border-right:none;color:#ffffff" />
            <br />
            <br />
            <a id="btnMailChimp" class="homepagelinks" href="#">Subscribe</a>
        </div>
        <div class="col-lg-12" style="background-color:white">
            <br />
            <br />
            <label id="NewsEventsTitle" style="font-family:'chiser';font-size:50px"><i class="icon-search"></i> SEARCH INVENTORY </label>
            <br />
            <br />
            <br />

            <input id="txtSearchCigars" class="text-center form-control" style="font-family:'chiser';font-size:30px;border:none;height:50px" placeholder="Search by brand, name, material, finish or shape." />



            <hr style="margin-top:13px;margin-left:0%;margin-right:0%;margin-bottom:5.5%" />



            <!--<div class="col-lg-3 text-left">
                <h5 style="font-family:'tex'">Sort By</h5>
                <select class="form-control">
                    <option>Brand (A-Z)</option>
                    <option>Brand (Z-A)</option>
                    <option>Price (Low to High)</option>
                    <option>Price (High to Low)</option>
                    <option>New Arrivals</option>
                </select>
            </div>
            <div class="col-lg-3 text-left">
                <h5 style="font-family:'tex'">Brand</h5>
                <select class="form-control">
                    <option>Any</option>
                </select>
            </div>
            <div class="col-lg-3 text-left">

                <h5 style="font-family:'tex'">Body</h5>
                <select class="form-control">
                    <option>Any</option>
                    <option>Mild</option>
                    <option>Medium</option>
                    <option>Full</option>
                </select>
            </div>
            <div class="col-lg-3 text-left">

                <h5 style="font-family:'tex'">Size</h5>
                <select class="form-control">
                    <option>Any</option>
                    <option>Mild</option>
                    <option>Medium</option>
                    <option>Full</option>
                </select>
            </div>

            <div class="col-lg-12 text-center">
                <br />

                <a class="homepagelinks" href="Cigars.html">FILTER</a>
                <br />
                <br />
            </div>-->



        </div>

    </div>

    <!-- Modal -->
    <div class="modal fade" id="viewCartModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" style="background-color:rgba(01,01,01,0.7)">
        <div class="modal-dialog" role="document">
            <div class="modal-content">

                <div>
                    <div class="col-lg-12 text-center">
                        <br />
                        <h2 class="text-center" style="font-family:'chiser'"><b>My Cart</b></h2>
                        <label style="font-family:'chiser'" class="text-center" id="cartmsg"></label>


                        <div id="CartLoader">


                            <!--<div class="col-lg-12">
                                <div class="col-lg-6">
                                    <img src="images/IMG_9927.jpg" class="img-responsive img-thumbnail"/>
                                </div>
                                <div class="col-lg-6 text-left" style="padding-top:5%">
                                    <ul class="list-unstyled">
                                        <li><label class="text-center" style="font-family:'chiser'"><b>Rocky Patel Decade Toro</b></label></li>
                                        <li><label class="text-center" style="font-family:'chiser'"><b>1 Box</b></label></li>
                                        <li><label class="text-center" style="font-family:'chiser'"><b>$250.50</b></label></li>
                                        <li><a href="#" class="btn btn-sm btn-danger"><i class="glyphicon glyphicon-remove"></i></a></li>
                                    </ul>
                                </div>
                            </div>-->









                        </div>
                        <div class="col-lg-12 text-center">
                            <h3 class="text-center" style="font-family:'chiser'"><b>Cart Total:$<span id="CartTtl"></span></b></h3>
                            <a href="Checkout.html" style="font-size:large;" class="btn btn-default"><i class="glyphicon glyphicon-shopping-cart"></i> Checkout</a>
                        </div>

                    </div>

                </div>
                <div class="modal-footer">
                    <br />
                    <br />
                    <button type="button" class="btn btn-news" data-dismiss="modal"><i class="glyphicon glyphicon-remove"></i></button>

                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="viewCigarModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" style="background-color:rgba(01,01,01,0.7)">
        <div class="modal-dialog" role="document">
            <div class="modal-content">

                <div>
                    <div class="col-lg-12">
                        <br />
                        <div id="prodimgholder">

                        </div>
                        <!--<img src="images/IMG_9642.jpg" class="img-thumbnail img-thumbnail center-block" style="margin:0px" />-->
                        <br />
                     
                        <div class="col-lg-6 text-left">
                            <ul class="list-unstyled" style="font-size:large;font-family:'chiser'">
                                <li><b>Brand: </b> <span id="cBrand"></span></li>
                                <li><b>Name: </b> <span id="cName"></span></li>
                                <li><b>Material: </b><span id="cMaterial"></span></li>
                                <li><b>Body Shape: </b><span id="cBodyShape"></span> </li>
                                <li><b>Bowl Finish: </b> <span id="cBowlFinish"></span></li>
                                <li><b>Stem Shape:</b> <span id="cStemShape"></span></li>
                                <li><b>Description:</b> <span id="cDescription"></span></li>   
                                <li><b>Price:</b> $<span id="cPrice"></span></li>
                        
                            </ul>
                        </div>
                        <div class="col-lg-6">
                            <ul class="list-inline" style="font-size:large;font-family:'chiser'">
                           
                                <li>
                                    <b>Quantity: </b>
                                    <input id="Qty" class="form-control" />
                                </li>

                            </ul>
                            <label id="QtyMsg" style="color:red"></label>
                            <br />
                            <b style="font-family:'chiser'">
                                Total:<span id="Total">$100.56</span>
                            </b>
                            <br />
                            <br />
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <br />
                    <br />
                    <button type="button" class="btn btn-news" data-dismiss="modal"><i class="glyphicon glyphicon-remove"></i></button>
                    <button id="btnAddToCart" type="button" class="btn btn-news2">Add To Cart</button>
                    <br />
                    <label id="lbladdtocartmsg" style="color:red"></label>
                </div>
            </div>
        </div>
    </div>

    <div class="col-lg-12" style="padding:0px;background-color:white" id="CigarLoader">
        <!--<div class='col-lg-3 text-center featuredprod' style='background-image:url(images/IMG_9868.jpg);padding-top:218px;background-size:cover;background-repeat:no-repeat;background-position:center;padding-left:0px;padding-right:0px'>
            <div class="col-lg-12" style="padding:5px;padding-bottom:10px;background-color:rgba(01,01,01,0.7)">
                <h4 class="text-center" style="color:white;font-family:'chiser'">Rocky Patel Toro</h4>
                <ul class="list-inline">

                    <li><a href="#" data-toggle="modal" data-target="#viewCigarModal" style="background-color:rgba(206,70,70,1);color:white;padding:5px;padding-left:12px;padding-right:12px;border-radius:7px"><i class="glyphicon glyphicon-shopping-cart"></i> Add</a> </li>
                </ul>
            </div>
        </div>-->
    </div>








    <div id="c">

        <div class="col-lg-12 text-center" style="padding:20px;background-color:#171616">
            <h5><a href="http://www.laboremedge.com" style="color:white">Made with <i style="color:rgba(206,70,70,0.7)" class="icon-heart"></i> by Laborem Edge</a></h5>
        </div>
    </div>




    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/jquery.min.js" type="text/javascript"></script>
    <script src="js/bootstrap.min.js" type="text/javascript"></script>
    <script src="js/main.js" type="text/javascript"></script>
    <script src="js/smoothscroll.js" type="text/javascript"></script>

    <script>
        $(document).ready(function () {





            $.ajax({
                type: "POST",
                url: "Engine.asmx/GetCartCount",
                data: "{}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    var result = data.d;


                    $("#cartcount").text(result);


                },
                failure: function (msg) {
                    alert(msg);
                },
                error: function (err) {
                    alert(err);
                }
            }) //end ajax




            $("#txtSearchCigars").keyup(function () {

                var texttosearch = $(this).val()


                var Category = 'Pipes'

                $.ajax({
                    type: "POST",
                    url: "Engine.asmx/SearchProducts",
                    data: "{ProductCategory:'" + Category + "',SearchText:'" + texttosearch + "'}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (data) {

                        //take data and append as list item parameters to be selected by user
                        var result = data.d;

                        if (result == 0) {
                            $("#CigarLoader").empty();
                            return;
                        }

                        $("#CigarLoader").empty();
                        // "<img class='img img-responsive'  src='ImageHandler.ashx?id=" + item.NewsPostID + "'>"
                        $.each(result, function (index, item) {



                            var content = "  <div class='col-lg-3 text-center featuredprod pipe' style='background-image:url(ImageHandler.ashx?id=" + item.ProductID + "&category=Pipes);padding-top:253.2px;background-size:cover;background-repeat:no-repeat;background-position:center;padding-left:0px;padding-right:0px'>  " +
          "  <div class='col-lg-12' style='padding:5px;padding-bottom:10px;background-color:rgba(01,01,01,0.7)'>" +
                       "  <h4 class='text-center' style='color:white;font-family:'chiser'><a href='#' style='color:white'>" + item.Brand + ' ' + item.Name + "</a></h4>" +
          "  <ul class='list-inline'> " +
          "  <li><a class='pipez' data-material='" + item.Material + "' data-bodyshape='" + item.BodyShape + "' data-bowlfinish='" + item.BowlFinish + "' data-stemshape='" + item.StemShape + "' data-Qty='" + item.Qty + "' data-price='" + item.Price + "'  data-SKU='" + item.SKU + "' data-description='" + item.Description + "' data-prodid=" + item.ProductID + "  data-name=" + item.Name + " data-brand=" + item.Brand + " href='#' data-toggle='modal' data-target='#viewCigarModal' style='background-color:rgba(01,01,01,0.8);color:white;padding:5px;padding-left:12px;padding-right:12px;border-radius:7px'><i class='glyphicon glyphicon-search'></i> View</a> </li> " +
          "  </ul>     " +
          "  </div>    " +
          "  </div>    "

                            $(content).hide().appendTo("#CigarLoader").fadeIn(1000);

                        })




                    },
                    failure: function (msg) {
                        alert(msg);
                    },
                    error: function (err) {
                        alert(err);
                    }
                }) //end ajax





            })

            var Total = 0.0;
            var Pipe = 'Pipes'

            $.ajax({
                type: "POST",
                url: "Engine.asmx/GetFeaturedProductInfo",
                data: "{ProductCategory:'" + Pipe + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {

                    //take data and append as list item parameters to be selected by user
                    var result = data.d;

                    if (result == 0) {
                        $("#FeaturedProductsLoader").empty();
                        return;
                    }

                    $("#FeaturedProductsLoader").empty();
                    // "<img class='img img-responsive'  src='ImageHandler.ashx?id=" + item.NewsPostID + "'>"
                    $.each(result, function (index, item) {


                        //   var content = " <div class='col-lg-6 text-center featuredprod' style='background-image:url(ImageHandler.ashx?id=" + item.ProductID + "&category=" + item.Category + ");padding:150px;background-size:cover;background-repeat:no-repeat;background-position:center'> " +
                        //" <a href='ProductDetails.html?postid=" + item.ProductID + "#Category=" + item.Category + "' class='btn btn-default viewme' style='background-color:rgba(01,01,01,0);color:rgba(01,01,01,0);border:none;font-size:x-large'>View</a> " +
                        //"  </div> "



                        var content = "  <div class='col-lg-6 text-center featuredprod pipe' style='background-image:url(ImageHandler.ashx?id=" + item.ProductID + "&category=Pipes);padding-top:253.2px;background-size:cover;background-repeat:no-repeat;background-position:center;padding-left:0px;padding-right:0px'>  " +
             "  <div class='col-lg-12' style='padding:5px;padding-bottom:10px;background-color:rgba(01,01,01,0.7)'>" +
                          "  <h4 class='text-center' style='color:white;font-family:'chiser'><a href='#' style='color:white'>" + item.Brand + ' ' + item.Name + "</a></h4>" +
             "  <ul class='list-inline'> " +
             "  <li><a class='pipez' data-material='"+ item.Material +"' data-bodyshape='"+ item.BodyShape +"' data-bowlfinish='"+ item.BowlFinish +"' data-stemshape='"+ item.StemShape +"' data-Qty='"+ item.Qty +"' data-price='"+ item.Price +"'  data-SKU='" + item.SKU + "' data-description='" + item.Description + "' data-prodid=" + item.ProductID + "  data-name=" + item.Name + " data-brand=" + item.Brand + " href='#' data-toggle='modal' data-target='#viewCigarModal' style='background-color:rgba(01,01,01,0.8);color:white;padding:5px;padding-left:12px;padding-right:12px;border-radius:7px'><i class='glyphicon glyphicon-star'></i> View</a> </li> " +
             "  </ul>     " +
             "  </div>    " +
             "  </div>    "

                        $(content).appendTo("#FeaturedProductsLoader");

                    })

                    //"  <div class='col-lg-3'> " +
                    //  "  <img src='ImageHandler.ashx?id=" + item.ProductID + "&category=" + item.Category + "' class='img img-responsive img-thumbnail'/> " +
                    //  "  <div class='featuredProductTitle' style='margin-top:10px'> " +
                    //  "  <a href='#'><b style='color: rgba(0,0,0,0.65)'>" + item.Name + "<br/ ><label class='label label-default' style='background-color:rgba(0,0,0,0.7)'>$" + item.Price + "</label></b></a> " +
                    //  "  </div> " +
                    //  "  </div> "


                },
                failure: function (msg) {
                    alert(msg);
                },
                error: function (err) {
                    alert(err);
                }
            }) //end ajax


            $("#FeaturedProductsLoader").delegate(".featuredprod", "mouseover", function (e) {

                $(this).find(".viewme").css("background-color", "rgba(0,0,0,0.80)");
                $(this).find(".viewme").css("color", "white");
            })
            $("#FeaturedProductsLoader").delegate(".featuredprod", "mouseout", function (e) {

                $(this).find(".viewme").css("background-color", "rgba(01,01,01,0)");
                $(this).find(".viewme").css("color", "rgba(01,01,01,0)");
            })

            var Category = 'Pipes'

            $.ajax({
                type: "POST",
                url: "Engine.asmx/GetProducts",
                data: "{ProductCategory:'" + Category + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {

                    //take data and append as list item parameters to be selected by user
                    var result = data.d;

                    if (result == 0) {
                        $("#CigarLoader").empty();
                        return;
                    }

                    $("#CigarLoader").empty();
                    // "<img class='img img-responsive'  src='ImageHandler.ashx?id=" + item.NewsPostID + "'>"
                    $.each(result, function (index, item) {

                      

                        var content = "  <div class='col-lg-3 text-center featuredprod pipe' style='background-image:url(ImageHandler.ashx?id=" + item.ProductID + "&category=Pipes);padding-top:253.2px;background-size:cover;background-repeat:no-repeat;background-position:center;padding-left:0px;padding-right:0px'>  " +
             "  <div class='col-lg-12' style='padding:5px;padding-bottom:10px;background-color:rgba(01,01,01,0.7)'>" +
                          "  <h4 class='text-center' style='color:white;font-family:'chiser'><a href='#' style='color:white'>" + item.Brand + ' ' + item.Name + "</a></h4>" +
             "  <ul class='list-inline'> " +
             "  <li><a class='pipez' data-material='" + item.Material + "' data-bodyshape='" + item.BodyShape + "' data-bowlfinish='" + item.BowlFinish + "' data-stemshape='" + item.StemShape + "' data-Qty='" + item.Qty + "' data-price='" + item.Price + "'  data-SKU='" + item.SKU + "' data-description='" + item.Description + "' data-prodid=" + item.ProductID + "  data-name=" + item.Name + " data-brand=" + item.Brand + " href='#' data-toggle='modal' data-target='#viewCigarModal' style='background-color:rgba(01,01,01,0.8);color:white;padding:5px;padding-left:12px;padding-right:12px;border-radius:7px'><i class='glyphicon glyphicon-search'></i> View</a> </li> " +
             "  </ul>     " +
             "  </div>    " +
             "  </div>    "

                        $(content).appendTo("#CigarLoader");

                    })




                },
                failure: function (msg) {
                    alert(msg);
                },
                error: function (err) {
                    alert(err);
                }
            }) //end ajax




            var _ProductViewing;
            var _Option; //for box or single
            var _DisplayName;
            var _Qty;
            var _Material;
            var _BodyShape;
            var _BowlFinish;
            var _StemShape;
            var _Price;

            $("#FeaturedProductsLoader").delegate(".pipez", "click", function (e) {

                $("#QtyMsg").text("");
                $("#Qty").val("");
                $("#lbladdtocartmsg").text("");
                _ProductViewing = $(this).attr('data-prodid');
                var ProductID = $(this).attr('data-prodid');

                var Brand = $(this).attr('data-brand');
                $("#cBrand").text(Brand);

                var Name = $(this).attr('data-name');
                _DisplayName = Brand + ' ' + Name;

                $("#cName").text(_DisplayName);

                var Description = $(this).attr('data-description');
                $("#cDescription").text(Description);

                var SKU = $(this).attr('data-SKU');
                var Price = $(this).attr('data-price');
                _Price = $(this).attr('data-price');
                $("#cPrice").text(_Price);

                //var Qty = $(this).attr('data-Qty');
                //_Qty = $(this).attr('data-Qty');
             
                _Material = $(this).attr('data-material');
                $("#cMaterial").text(_Material);



                _BodyShape =  $(this).attr('data-bodyshape');
                var bodyshape = $(this).attr('data-bodyshape');

                _BowlFinish = $(this).attr('data-bowlfinish');
                var bowlfinish = $(this).attr('data-bowlfinish');
                _StemShape = $(this).attr('data-stemshape');
                var stemshape = $(this).attr('data-stemshape');

                $("#cBodyShape").text(bodyshape);
                $("#cBowlFinish").text(bowlfinish);
                $("#cStemShape").text(stemshape);
              
                _Qty = $(this).attr('data-Qty');
              
                _Option = _Material + ' ' + _BodyShape + ' ' + _BowlFinish + ' ' + _StemShape
                $("#prodimgholder").empty();
                var img = "<img  src='ImageHandler.ashx?id=" + ProductID + "&category=Pipes' class='img-thumbnail img-thumbnail center-block' style='margin:0px' /><br />"
                $(img).appendTo("#prodimgholder");


                $("#QtyMsg").hide();
                $("#Total").text('$' + Total);
            })


            $("#CigarLoader").delegate(".pipez", "click", function (e) {
                $("#QtyMsg").text("");
                $("#Qty").val("");
                $("#lbladdtocartmsg").text("");
                _ProductViewing = $(this).attr('data-prodid');
                var ProductID = $(this).attr('data-prodid');

                var Brand = $(this).attr('data-brand');
                $("#cBrand").text(Brand);

                var Name = $(this).attr('data-name');
                _DisplayName = Brand + ' ' + Name;
               
                $("#cName").text(_DisplayName);

                var Description = $(this).attr('data-description');
                $("#cDescription").text(Description);

                var SKU = $(this).attr('data-SKU');
                var Price = $(this).attr('data-price');
                _Price = $(this).attr('data-price');
                $("#cPrice").text(_Price);

                //var Qty = $(this).attr('data-Qty');
                //_Qty = $(this).attr('data-Qty');

                _Material = $(this).attr('data-material');
                $("#cMaterial").text(_Material);

              

                _BodyShape = $(this).attr('data-bodyshape');
                var bodyshape = $(this).attr('data-bodyshape');

                _BowlFinish = $(this).attr('data-bowlfinish');
                var bowlfinish = $(this).attr('data-bowlfinish');
                _StemShape = $(this).attr('data-stemshape');
                var stemshape = $(this).attr('data-stemshape');

                _Option = _Material + ' ' + _BodyShape + ' ' + _BowlFinish + ' ' + _StemShape



                $("#cBodyShape").text(bodyshape);
                $("#cBowlFinish").text(bowlfinish);
                $("#cStemShape").text(stemshape);

                _Qty = $(this).attr('data-Qty');

                $("#prodimgholder").empty();
                var img = "<img  src='ImageHandler.ashx?id=" + ProductID + "&category=Pipes' class='img-thumbnail img-thumbnail center-block' style='margin:0px' /><br />"
                $(img).appendTo("#prodimgholder");


                $("#QtyMsg").hide();
                $("#Total").text('$' + Total);
            })


            $("#Qty").keyup(function () {
                $("#QtyMsg").text("");
               
               
                    //Update Total
                    if ($("#Qty").val() % 1 != 0) {
                        $("#QtyMsg").show();
                        $("#QtyMsg").text("Quantity must be a whole number");
                        $("#Qty").val("");
                        $("#Total").text('$' + 0.00);
                        return;
                    }
                    var qty = parseInt($("#Qty").val())
                    if (qty > _Qty) {
                        $("#QtyMsg").show();
                        $("#QtyMsg").text("Max quantity is " + _Qty);
                        $("#Qty").val("");
                        $("#Total").text('$' + 0.00);
                        return;
                    }
                    var ttl = _Price * qty;
                    if (isNaN(ttl)) {
                        ttl = 0.00;
                    }
                    $("#Total").text('$' + ttl.toFixed(2));
                
               
            }) //end qty key up function



            $("#btnAddToCart").click(function () {

          
                var qty = parseInt($("#Qty").val());
                var ttl = $("#Total").text();
                // var itemdesc = $("#cBrand").text() + ' ' + $("#cName").text() + ' ' + $("#cLength").text() + 'x' + $("#cRing").text();

                $.ajax({
                    type: "POST",
                    url: "Engine.asmx/AddToCart",
                    data: "{ProductID:'" + _ProductViewing + "',Qty:'" + qty + "',Notes:'" + _Option + "',Price:'" + ttl + "',Category:'Pipes',ItemName:'" + _DisplayName + "'}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (data) {
                        var result = data.d;

                        if (result == 2) {
                            $("#lbladdtocartmsg").text("Item already in cart!");
                            $("#Qty").val("");
                            getCartCount();
                            return;
                        }

                        getCartCount();
                        $("#Qty").val("");
                        $('#viewCigarModal').modal('hide');
                    },
                    failure: function (msg) {
                        alert(msg);
                    },
                    error: function (err) {
                        alert(err);
                    }
                }) //end ajax

            })


            //Write checkchange events for single or box. We will validate and assume a qty has been entered.
            $("#ckSingles").change(function () {
                $("#Qty").val("");
                $("#Total").text('$' + 0.00);
                if ($('#ckSingles').is(':checked')) {
                    $("#ckBoxes").prop('checked', false);
                    $("#Qty").val("");
                    $("#Total").text('$' + 0.00);
                }

            });
            $("#ckBoxes").change(function () {
                $("#Qty").val("");
                $("#Total").text('$' + 0.00);
                if ($('#ckBoxes').is(':checked')) {
                    $("#ckSingles").prop('checked', false);
                    $("#Qty").val("");
                    $("#Total").text('$' + 0.00);
                }

            });


            //My Cart Code


            $("#myCart").click(function () {
                $("#cartmsg").text("");
                $("#CartLoader").empty();
                $.ajax({
                    type: "POST",
                    url: "Engine.asmx/GoToCart",
                    data: "{}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (data) {
                        var result = data.d;

                        if (result == 0) {
                            $("#cartmsg").text("(No items in cart to show)");
                            $("#CartTtl").text("0.00");
                            return;
                        }

                        $("#CartLoader").empty();
                        // "<img class='img img-responsive'  src='ImageHandler.ashx?id=" + item.NewsPostID + "'>"
                        $.each(result, function (index, item) {

                            var content = "<div class='col-lg-12'> " +
                        "     <div class='col-lg-6'> " +
                        "         <img src='ImageHandler.ashx?id=" + item.ProductID + "&Category=" + item.Category + "' class='img-responsive img-thumbnail center-block'/> " +
                        "     </div> " +
                        "     <div class='col-lg-6 text-left' style='padding-top:5%'> " +
                        "         <ul class='list-unstyled'> " +
                        "             <li><label class='text-left' style='font-family:'chiser';'><b>" + item.ItemName + "</b></label></li> " +
                        "             <li><label class='text-left' style='font-family:'chiser';'><b>(" + item.Qty + ') ' + item.Notes + "</b></label></li> " +
                        "             <li><label class='text-left' style='font-family:'chiser';'><b>$" + item.Price + "</b></label></li> " +
                        "             <li><a data-notes='" + item.Notes + "' data-qty='" + item.Qty + "' data-price='" + item.Price + "' id=" + item.ProductID + " href='#' class='btn btn-sm btn-danger removeitem'><i class='glyphicon glyphicon-remove'></i></a></li> " +
                        "         </ul> " +
                        "     </div> " +
                        " </div> "

                            $(content).appendTo("#CartLoader");

                        })
                        getCartTotal();

                    },
                    failure: function (msg) {
                        alert(msg);
                    },
                    error: function (err) {
                        alert(err);
                    }
                }) //end ajax
            })


            $("#CartLoader").delegate(".removeitem", "click", function (e) {
                var removeitemnbr = $(this).attr('id');
                var notes = $(this).attr('data-notes');
                var qty = $(this).attr('data-qty');
                var price = $(this).attr('data-price');




                $.ajax({
                    type: "POST",
                    url: "Engine.asmx/RemoveItemFromCart",
                    data: "{ProdID:" + removeitemnbr + ",Notes:'" + notes + "',Qty:'" + qty + "',Price:'" + price + "'}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (data) {
                        var result = data.d;
                        getCartCount();
                        $('#viewCartModal').modal('hide');



                    },
                    failure: function (msg) {
                        alert(msg);
                    },
                    error: function (err) {
                        alert(err);
                    }
                }) //end ajax
            })





            function getCartCount() {

                $.ajax({
                    type: "POST",
                    url: "Engine.asmx/GetCartCount",
                    data: "{}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (data) {
                        var result = data.d;


                        $("#cartcount").text(result);


                    },
                    failure: function (msg) {
                        alert(msg);
                    },
                    error: function (err) {
                        alert(err);
                    }
                }) //end ajax
            }

            // End My Cart Code

            function getCartTotal() {

                $.ajax({
                    type: "POST",
                    url: "Engine.asmx/GetCartTotal",
                    data: "{}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (data) {
                        var result = data.d;

                        if (result == 0) {
                            $("#CartTtl").text("0.00");
                            return;
                        }

                        $("#CartTtl").text(result);


                    },
                    failure: function (msg) {
                        alert(msg);
                    },
                    error: function (err) {
                        alert(err);
                    }
                }) //end ajax

            }



            //Subscribe To Mailing List
            $("#btnMailChimp").click(function (e) {
                e.preventDefault();
                var EmailAddy = $("#MailChimpEmail").val();



                $.ajax({
                    type: "POST",
                    url: "Engine.asmx/SubscribeToMailingList",
                    data: "{Email:'" + EmailAddy + "'}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (data) {

                        //take data and append as list item parameters to be selected by user
                        var result = data.d;
                        $("#MailChimpEmail").val("Thanks!");
                        $("#MailChimpEmail").css("color", "#BF4A22");

                    },
                    failure: function (msg) {
                        alert(msg);
                    },
                    error: function (err) {
                        alert(err);
                    }
                }) //end ajax

            })


        })
    </script>

</body>
</html>





